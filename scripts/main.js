"use strict";

var data = {
    "timelineDay": {
        "1": { // user ID
            "fullName": "Фролова Олеся Матвеевна",
            "department": {
                "id": "1",
                "name": "Отдел 1"
            },
            "statArr": {
                "1": {
                    "time_type": "presence",
                    "time_rel": "10"
                },
                "2": {
                    "time_type": "other",
                    "time_rel": "5"
                },
                "3": {
                    "time_type": "relax",
                    "time_rel": "5"
                },
                "4": {
                    "time_type": "absence",
                    "time_rel": "7"
                },
                "5": {
                    "time_type": "presence",
                    "time_rel": "30"
                },
                "6": {
                    "time_type": "absence",
                    "time_rel": "15"
                }
            },
            "statSum": {
                "presence": "8ч 23м",
                "other": "4ч 20м",
                "absence": "3ч 40м"
            }
        },
        "2": {
            "fullName": "Симонов Артём Александрович",
            "department": {
                "id": "1",
                "name": "Отдел 1"
            },
            "statArr": {
                "1": {
                    "time_type": "presence",
                    "time_rel": "18.9"
                },
                "2": {
                    "time_type": "other",
                    "time_rel": "18.7"
                },
                "3": {
                    "time_type": "absence",
                    "time_rel": "19"
                },
                "4": {
                    "time_type": "presence",
                    "time_rel": "39.4"
                },
                "5": {
                    "time_type": "absence",
                    "time_rel": "4"
                }
            },
            "statSum": {
                "presence": "8ч 23м",
                "other": "4ч 20м",
                "absence": "3ч 40м"
            }
        },
        "3": {
            "fullName": "Романова Кира Максимовна",
            "department": {
                "id": "2",
                "name": "Отдел 2"
            },
            "statArr": {
                "1": {
                    "time_type": "presence",
                    "time_rel": "18.9"
                },
                "2": {
                    "time_type": "other",
                    "time_rel": "18.7"
                },
                "3": {
                    "time_type": "absence",
                    "time_rel": "19"
                },
                "4": {
                    "time_type": "presence",
                    "time_rel": "39.4"
                },
                "5": {
                    "time_type": "absence",
                    "time_rel": "4"
                }
            },
            "statSum": {
                "presence": "8ч 23м",
                "other": "4ч 20м",
                "absence": "3ч 40м"
            }
        },
        "4": {
            "fullName": "Мальцева Алиса Тимуровна",
            "department": {
                "id": "2",
                "name": "Отдел 2"
            },
            "statArr": {
                "1": {
                    "time_type": "presence",
                    "time_rel": "18.9"
                },
                "2": {
                    "time_type": "other",
                    "time_rel": "18.7"
                },
                "3": {
                    "time_type": "absence",
                    "time_rel": "19"
                },
                "4": {
                    "time_type": "presence",
                    "time_rel": "39.4"
                },
                "5": {
                    "time_type": "absence",
                    "time_rel": "4"
                }
            },
            "statSum": {
                "presence": "8ч 23м",
                "other": "4ч 20м",
                "absence": "3ч 40м"
            }
        },
        "5": {
            "fullName": "Круглова Виктория Данииловна",
            "department": {
                "id": "2",
                "name": "Отдел 2"
            },
            "statArr": {
                "1": {
                    "time_type": "presence",
                    "time_rel": "18.9"
                },
                "2": {
                    "time_type": "other",
                    "time_rel": "18.7"
                },
                "3": {
                    "time_type": "absence",
                    "time_rel": "19"
                },
                "4": {
                    "time_type": "presence",
                    "time_rel": "39.4"
                },
                "5": {
                    "time_type": "absence",
                    "time_rel": "4"
                }
            },
            "statSum": {
                "presence": "8ч 23м",
                "other": "4ч 20м",
                "absence": "3ч 40м"
            }
        },
        "6": {
            "fullName": "Седов Даниил Евгеньевич",
            "department": {
                "id": "3",
                "name": "Отдел 3"
            },
            "statArr": {
                "1": {
                    "time_type": "presence",
                    "time_rel": "18.9"
                },
                "2": {
                    "time_type": "other",
                    "time_rel": "18.7"
                },
                "3": {
                    "time_type": "absence",
                    "time_rel": "19"
                },
                "4": {
                    "time_type": "presence",
                    "time_rel": "39.4"
                },
                "5": {
                    "time_type": "absence",
                    "time_rel": "4"
                }
            },
            "statSum": {
                "presence": "8ч 23м",
                "other": "4ч 20м",
                "absence": "3ч 40м"
            }
        },
        "7": {
            "fullName": "Анисимова София Владимировна",
            "department": {
                "id": "4",
                "name": "Отдел 4"
            },
            "statArr": {
                "1": {
                    "time_type": "presence",
                    "time_rel": "18.9"
                },
                "2": {
                    "time_type": "other",
                    "time_rel": "18.7"
                },
                "3": {
                    "time_type": "absence",
                    "time_rel": "19"
                },
                "4": {
                    "time_type": "presence",
                    "time_rel": "39.4"
                },
                "5": {
                    "time_type": "absence",
                    "time_rel": "4"
                }
            },
            "statSum": {
                "presence": "8ч 23м",
                "other": "4ч 20м",
                "absence": "3ч 40м"
            }
        }
    },
    "timelineWeek": {
        "1": { // user ID
            "fullName": "Фролова Олеся Матвеевна",
            "department": {
                "id": "1",
                "name": "Отдел 1"
            },
            "statArr": {
                "1": { // monday
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "2": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "3": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "4": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "5": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "6": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "7": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                }
            },
            "statSum": {
                "1": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "2": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "3": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "4": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "5": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "6": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "7": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "total": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                }
            }
        },
        "2": { // user ID
            "fullName": "Симонов Артём Александрович",
            "department": {
                "id": "1",
                "name": "Отдел 1"
            },
            "statArr": {
                "1": { // monday
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "2": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "3": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "4": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "5": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "6": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "7": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                }
            },
            "statSum": {
                "1": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "2": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "3": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "4": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "5": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "6": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "7": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "total": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                }
            }
        },
        "3": { // user ID
            "fullName": "Романова Кира Максимовна",
            "department": {
                "id": "2",
                "name": "Отдел 2"
            },
            "statArr": {
                "1": { // monday
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "2": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "3": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "4": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "5": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "6": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "7": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                }
            },
            "statSum": {
                "1": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "2": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "3": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "4": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "5": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "6": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "7": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "total": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                }
            }
        },
        "4": { // user ID
            "fullName": "Мальцева Алиса Тимуровна",
            "department": {
                "id": "2",
                "name": "Отдел 2"
            },
            "statArr": {
                "1": { // monday
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "2": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "3": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "4": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "5": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "6": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                },
                "7": {
                    "1": {
                        "time_type": "presence",
                        "time_rel": "10"
                    },
                    "2": {
                        "time_type": "other",
                        "time_rel": "5"
                    },
                    "3": {
                        "time_type": "relax",
                        "time_rel": "5"
                    },
                    "4": {
                        "time_type": "absence",
                        "time_rel": "7"
                    }
                }
            },
            "statSum": {
                "1": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "2": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "3": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "4": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "5": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "6": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "7": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                },
                "total": {
                    "presence": "8ч 23м",
                    "other": "4ч 20м",
                    "absence": "3ч 40м"
                }
            }
        }
    },
    "timelineMonth": {
        "1": { // user ID
            "fullName": "Фролова Олеся Матвеевна",
            "department": {
                "id": "1",
                "name": "Отдел 1"
            },
            "statArr": {
                "1": {
                    "time_type": "presence",
                    "time_rel": "10"
                },
                "2": {
                    "time_type": "other",
                    "time_rel": "5"
                },
                "3": {
                    "time_type": "relax",
                    "time_rel": "5"
                },
                "4": {
                    "time_type": "absence",
                    "time_rel": "7"
                },
                "5": {
                    "time_type": "presence",
                    "time_rel": "30"
                },
                "6": {
                    "time_type": "absence",
                    "time_rel": "15"
                }
            },
            "statSum": {
                "presence": "8ч 23м",
                "other": "4ч 20м",
                "absence": "3ч 40м"
            }
        },
        "2": {
            "fullName": "Симонов Артём Александрович",
            "department": {
                "id": "1",
                "name": "Отдел 1"
            },
            "statArr": {
                "1": {
                    "time_type": "presence",
                    "time_rel": "18.9"
                },
                "2": {
                    "time_type": "other",
                    "time_rel": "18.7"
                },
                "3": {
                    "time_type": "absence",
                    "time_rel": "19"
                },
                "4": {
                    "time_type": "presence",
                    "time_rel": "39.4"
                },
                "5": {
                    "time_type": "absence",
                    "time_rel": "4"
                }
            },
            "statSum": {
                "presence": "8ч 23м",
                "other": "4ч 20м",
                "absence": "3ч 40м"
            }
        },
        "3": {
            "fullName": "Романова Кира Максимовна",
            "department": {
                "id": "2",
                "name": "Отдел 2"
            },
            "statArr": {
                "1": {
                    "time_type": "presence",
                    "time_rel": "18.9"
                },
                "2": {
                    "time_type": "other",
                    "time_rel": "18.7"
                },
                "3": {
                    "time_type": "absence",
                    "time_rel": "19"
                },
                "4": {
                    "time_type": "presence",
                    "time_rel": "39.4"
                },
                "5": {
                    "time_type": "absence",
                    "time_rel": "4"
                }
            },
            "statSum": {
                "presence": "8ч 23м",
                "other": "4ч 20м",
                "absence": "3ч 40м"
            }
        },
        "4": {
            "fullName": "Мальцева Алиса Тимуровна",
            "department": {
                "id": "2",
                "name": "Отдел 2"
            },
            "statArr": {
                "1": {
                    "time_type": "presence",
                    "time_rel": "18.9"
                },
                "2": {
                    "time_type": "other",
                    "time_rel": "18.7"
                },
                "3": {
                    "time_type": "absence",
                    "time_rel": "19"
                },
                "4": {
                    "time_type": "presence",
                    "time_rel": "39.4"
                },
                "5": {
                    "time_type": "absence",
                    "time_rel": "4"
                }
            },
            "statSum": {
                "presence": "8ч 23м",
                "other": "4ч 20м",
                "absence": "3ч 40м"
            }
        },
        "5": {
            "fullName": "Круглова Виктория Данииловна",
            "department": {
                "id": "2",
                "name": "Отдел 2"
            },
            "statArr": {
                "1": {
                    "time_type": "presence",
                    "time_rel": "18.9"
                },
                "2": {
                    "time_type": "other",
                    "time_rel": "18.7"
                },
                "3": {
                    "time_type": "absence",
                    "time_rel": "19"
                },
                "4": {
                    "time_type": "presence",
                    "time_rel": "39.4"
                },
                "5": {
                    "time_type": "absence",
                    "time_rel": "4"
                }
            },
            "statSum": {
                "presence": "8ч 23м",
                "other": "4ч 20м",
                "absence": "3ч 40м"
            }
        },
        "6": {
            "fullName": "Седов Даниил Евгеньевич",
            "department": {
                "id": "3",
                "name": "Отдел 3"
            },
            "statArr": {
                "1": {
                    "time_type": "presence",
                    "time_rel": "18.9"
                },
                "2": {
                    "time_type": "other",
                    "time_rel": "18.7"
                },
                "3": {
                    "time_type": "absence",
                    "time_rel": "19"
                },
                "4": {
                    "time_type": "presence",
                    "time_rel": "39.4"
                },
                "5": {
                    "time_type": "absence",
                    "time_rel": "4"
                }
            },
            "statSum": {
                "presence": "8ч 23м",
                "other": "4ч 20м",
                "absence": "3ч 40м"
            }
        },
        "7": {
            "fullName": "Анисимова София Владимировна",
            "department": {
                "id": "4",
                "name": "Отдел 4"
            },
            "statArr": {
                "1": {
                    "time_type": "presence",
                    "time_rel": "18.9"
                },
                "2": {
                    "time_type": "other",
                    "time_rel": "18.7"
                },
                "3": {
                    "time_type": "absence",
                    "time_rel": "19"
                },
                "4": {
                    "time_type": "presence",
                    "time_rel": "39.4"
                },
                "5": {
                    "time_type": "absence",
                    "time_rel": "4"
                }
            },
            "statSum": {
                "presence": "8ч 23м",
                "other": "4ч 20м",
                "absence": "3ч 40м"
            }
        }
    }
};
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var TimelineDay = function () {
    function TimelineDay(wrapper, timelineProps) {
        _classCallCheck(this, TimelineDay);

        this.MAIN_WRAPPER = document.querySelector(wrapper);
        this.timelineProps = timelineProps;
        this.tbl_inner_stat = null;
        this.datepicker = null;
        this.datepicker_input = null;
        this.dep_filter = null;
        this.user_filter = null;
        this.ajaxUrl = '/';
        this.selectedDepart = 0;
        this.selectedUser = 0;
        this.selectedDate = 0;
        this.departments = {};
        this.users = {};
        this.months = ['января', 'февраля', 'марта', 'апреля', 'мая', 'июня', 'июля', 'августа', 'сентября', 'октября', 'ноября', 'декабря'];
        this.timeList = ['9:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00'];
        this.periodType = "day";
        this.settings();
    }

    _createClass(TimelineDay, [{
        key: 'init',
        value: function init() {
            this.MAIN_WRAPPER.dataset.wrap_period = this.periodType;
            var fragment = document.createDocumentFragment();
            var tbl_inner = this.addElm('div', 'tbl-inner');
            this.render(tbl_inner, this.tblHeader());
            this.render(tbl_inner, this.tblTimelineHeader());
            this.render(tbl_inner, this.tblTimelineStat());
            this.render(tbl_inner, this.tblTimelineInfo());
            this.render(fragment, this.tblControls());
            this.render(fragment, tbl_inner);
            this.render(this.MAIN_WRAPPER, fragment);
        }
    }, {
        key: 'settings',
        value: function settings() {
            if (!this.timelineProps['sum'] || this.timelineProps['sum'].length < 1) {
                this.timelineProps['sum'] = ["presence", "other", "absence"];
            }

            if (!this.timelineProps['items'] || this.isEmpty(this.timelineProps['items'])) {
                this.timelineProps['items'] = {
                    "presence": {
                        "color": "#25BF3E",
                        "caption": "Присутствие"
                    },
                    "absence": {
                        "color": "#DD4F4F",
                        "caption": "Отсутствие"
                    },
                    "other": {
                        "color": "#208FCD",
                        "caption": "Другой человек"
                    },
                    "relax": {
                        "color": "#E4E4E4",
                        "caption": "Перерыв на отдых"
                    }
                };
            }
        }
    }, {
        key: 'tblTabs',
        value: function tblTabs(wrap) {
            var tbl_control_period_day = this.addElm('div', 'tbl-control-period-item', 'День');
            var tbl_control_period_week = this.addElm('div', 'tbl-control-period-item', 'Неделя');
            var tbl_control_period_month = this.addElm('div', 'tbl-control-period-item', 'Месяц');

            tbl_control_period_day.dataset.period = 'day';
            tbl_control_period_week.dataset.period = 'week';
            tbl_control_period_month.dataset.period = 'month';

            switch (this.periodType) {
                case 'day':
                    tbl_control_period_day.classList.add('tbl-control-period-item-active');
                    break;
                case 'week':
                    tbl_control_period_week.classList.add('tbl-control-period-item-active');
                    break;
                case 'month':
                    tbl_control_period_month.classList.add('tbl-control-period-item-active');
                    break;
                default:
                    tbl_control_period_day.classList.add('tbl-control-period-item-active');
                    break;
            }

            this.render(wrap, tbl_control_period_day);
            this.render(wrap, tbl_control_period_week);
            this.render(wrap, tbl_control_period_month);
        }
    }, {
        key: 'tblControls',
        value: function tblControls() {
            var fragment = document.createDocumentFragment();
            var tbl_control = this.addElm('div', 'tbl-control');

            // TABS (day,week,month)
            var tbl_control_period = this.addElm('div', 'tbl-control-period');
            this.tblTabs(tbl_control_period);

            // FILTER
            var tbl_control_filter = this.addElm('div', 'tbl-control-filter');
            this.render(tbl_control_filter, this.loadFilter());

            // DATE PICKER
            this.datepicker = this.addElm('div', 'tbl-control-datepicker');
            this.loadFilterDate(this.datepicker);
            this.render(tbl_control, tbl_control_period);
            this.render(tbl_control, tbl_control_filter);
            this.render(tbl_control, this.datepicker);
            this.render(fragment, tbl_control);

            this.handlers();
            return fragment;
        }
    }, {
        key: 'loadFilter',
        value: function loadFilter() {
            var fragment = document.createDocumentFragment();

            // by department
            this.dep_filter = this.addElm('div', 'tbl-control-filter-item tbl-control-filter-dep');
            this.dep_filter_list = this.addElm('div', 'tbl-control-filter-item-list tbl-control-filter-dep-list');
            this.dep_filter_list.style.display = 'none';

            var dep_filter_item_title = this.addElm('div', 'tbl-control-filter-item-title', 'Отдел:');
            var dep_filter_item_value = this.addElm('div', 'tbl-control-filter-item-value', 'Все');
            dep_filter_item_value.dataset.id = !dep_filter_item_value.dataset.id ? 0 : dep_filter_item_value.dataset.id;
            var dep_filter_arrow = this.addElm('span', 'tbl-control-filter-arrow');

            // by user
            this.user_filter = this.addElm('span', 'tbl-control-filter-item tbl-control-filter-user');
            this.user_filter_list = this.addElm('div', 'tbl-control-filter-item-list tbl-control-filter-user-list');
            this.user_filter_list.style.display = 'none';
            var user_filter_item_title = this.addElm('span', 'tbl-control-filter-item-title', 'Сотрудник:');
            this.user_filter_item_value = this.addElm('span', 'tbl-control-filter-item-value', 'Все');
            this.user_filter_item_value.dataset.id = !this.user_filter_item_value.dataset.id ? 0 : this.user_filter_item_value.dataset.id;
            var user_filter_arrow = this.addElm('span', 'tbl-control-filter-arrow');

            this.render(this.dep_filter, dep_filter_item_title);
            this.render(this.dep_filter, dep_filter_item_value);
            this.render(this.dep_filter, dep_filter_arrow);
            this.render(this.dep_filter, this.dep_filter_list);
            this.render(this.user_filter, user_filter_item_title);
            this.render(this.user_filter, this.user_filter_item_value);
            this.render(this.user_filter, user_filter_arrow);
            this.render(this.user_filter, this.user_filter_list);
            this.render(fragment, this.dep_filter);
            this.render(fragment, this.user_filter);

            return fragment;
        }
    }, {
        key: 'loadFilterDep',
        value: function loadFilterDep(wrap) {
            var departments = this.departments;
            wrap.innerHTML = '';
            var dep_filter_list_item_all = this.addElm('div', 'department-item filter-select-item', 'Все');
            dep_filter_list_item_all.dataset.id = 0;
            this.render(wrap, dep_filter_list_item_all);
            for (var dep_id in departments) {
                var dep_filter_list_item = this.addElm('div', 'department-item filter-select-item', departments[dep_id]);
                dep_filter_list_item.dataset.id = dep_id;
                this.render(wrap, dep_filter_list_item);
            }
        }
    }, {
        key: 'loadFilterCollabs',
        value: function loadFilterCollabs(wrap) {
            var selectedElm = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

            wrap.innerHTML = '';
            var users = this.users;
            var user_filter_list_item_all = this.addElm('div', 'user-item filter-select-item', 'Все');
            user_filter_list_item_all.dataset.id = 0;
            this.render(wrap, user_filter_list_item_all);
            for (var user_id in users) {
                var user_filter_list_item = this.addElm('div', 'user-item filter-select-item', users[user_id]);
                user_filter_list_item.dataset.id = user_id;
                this.render(wrap, user_filter_list_item);
            }

            if (selectedElm !== null) {
                if (users[0] != undefined) {
                    selectedElm.textContent = users[0]['fullName'];
                } else {
                    selectedElm.textContent = '-';
                }
            }
        }
    }, {
        key: 'loadFilterDate',
        value: function loadFilterDate(wrap) {
            this.dateFormat = 'd M Y';
            switch (this.periodType) {
                case 'day':
                    this.dateFormat = 'd M Y';
                    break;
                case 'week':
                    this.dateFormat = 'd M Y - d M Y';
                    break;
                case 'month':
                    this.dateFormat = 'M Y';
                    break;
            }

            var date = new Date();
            date.setDate(date.getDate() - 1);
            var datepicker_icon = this.addElm('label', 'datepicker-icon', this.getDateFormated(date, this.dateFormat));
            this.datepicker_input = this.addElm('input', 'datepicker-input', 'datepicker');
            this.datepicker_input.type = 'date';
            this.datepicker_input.value = this.getDateFormated(date, 'Y-m-d');
            this.render(wrap, datepicker_icon);
            this.render(wrap, this.datepicker_input);
        }
    }, {
        key: 'tblHeader',
        value: function tblHeader() {
            var fragment = document.createDocumentFragment();
            var tbl_inner_header = this.addElm('div', 'tbl-inner-header');
            tbl_inner_header.innerHTML = '\n            <div class="tbl-inner-header-item tbl-inner-header-fullname">\u0424\u0418\u041E</div>\n            <div class="tbl-inner-header-item tbl-inner-header-results">\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044F</div>\n        ';

            this.render(fragment, tbl_inner_header);
            return fragment;
        }
    }, {
        key: 'tblTimelineHeader',
        value: function tblTimelineHeader() {
            var fragment = document.createDocumentFragment();
            var tbl_inner_tline = this.addElm('div', 'tbl-inner-tline');
            var tbl_inner_tline_empty = this.addElm('div', 'tbl-inner-tline-empty');

            if (this.periodType == 'month') {
                var tbl_inner_tline_info = this.addElm('div', 'tbl-inner-tline-info');
                tbl_inner_tline_info.innerHTML = '<p>Внимание: В данной статистике выводит общее соотношение позиций за весь месяц!</p>';
                this.render(tbl_inner_tline, tbl_inner_tline_empty);
                this.render(tbl_inner_tline, tbl_inner_tline_info);
            } else {
                var tbl_inner_tline_list = this.addElm('div', 'tbl-inner-tline-list');
                for (var i = 0; i < this.timeList.length; i++) {
                    var tbl_inner_tline_list_item = this.addElm('div', 'tbl-inner-tline-list-item', this.timeList[i]);
                    this.render(tbl_inner_tline_list, tbl_inner_tline_list_item);
                }
                this.render(tbl_inner_tline, tbl_inner_tline_empty);
                this.render(tbl_inner_tline, tbl_inner_tline_list);
            }

            this.render(fragment, tbl_inner_tline);
            return fragment;
        }
    }, {
        key: 'tblTimelineStat',
        value: function tblTimelineStat() {
            var fragment = document.createDocumentFragment();
            this.tbl_inner_stat = this.addElm('div', 'tbl-inner-stat');
            this.render(fragment, this.tbl_inner_stat);
            return fragment;
        }
    }, {
        key: 'tblTimelineInfo',
        value: function tblTimelineInfo() {
            var fragment = document.createDocumentFragment();
            var tbl_info = this.addElm('div', 'tbl-info');
            var timelineTypes = this.timelineProps['items'];
            var tbl_info_list = this.addElm('div', 'tbl-info-list');

            for (var type in timelineTypes) {
                var tbl_info_list_item = this.addElm('div', 'tbl-info-list-item tbl-info-list-item-' + type);
                var tbl_info_list_item_marker = this.addElm('div', 'marker');
                tbl_info_list_item_marker.style.backgroundColor = timelineTypes[type]['color'];
                var tbl_info_list_item_caption = this.addElm('div', 'tbl-info-list-item-caption', timelineTypes[type]['caption']);
                this.render(tbl_info_list_item, tbl_info_list_item_marker);
                this.render(tbl_info_list_item, tbl_info_list_item_caption);
                this.render(tbl_info_list, tbl_info_list_item);
            }

            this.render(tbl_info, tbl_info_list);
            this.render(fragment, tbl_info);
            return fragment;
        }
    }, {
        key: 'loadTimline',
        value: function loadTimline(data) {
            for (var user_id in data) {
                this.users[user_id] = data[user_id]['fullName'];
                this.departments[data[user_id]['department']['id']] = data[user_id]['department']['name'];
            }

            this.loadFilterDep(this.dep_filter_list);
            this.loadFilterCollabs(this.user_filter_list);

            var timelineSum = this.timelineProps['sum'];
            var timelineTypes = this.timelineProps['items'];

            // Clear timeline
            this.tbl_inner_stat.innerHTML = '';

            for (var i in data) {
                var fullName = data[i]['fullName'];
                var statArr = data[i]['statArr'];
                var statSum = data[i]['statSum'];

                var tbl_inner_stat_item = this.addElm('div', 'tbl-inner-stat-item');
                var tbl_inner_stat_person = this.addElm('div', 'tbl-inner-stat-person');
                var tbl_inner_stat_person_name = this.addElm('div', 'tbl-inner-stat-person-name', fullName);

                //------- Sum
                var tbl_inner_stat_person_sum = this.addElm('div', 'tbl-inner-stat-person-sum');
                var bracket_open = this.addElm('span', '', '(');
                var bracket_close = this.addElm('span', '', ')');
                this.render(tbl_inner_stat_person_sum, bracket_open);

                for (var type in timelineTypes) {
                    if (timelineSum.includes(type)) {
                        var timetype = this.addElm('span', 'timetype timetype-' + type, statSum[type]);
                        timetype.style.color = timelineTypes[type]['color'];
                        this.render(tbl_inner_stat_person_sum, timetype);
                    }
                }
                this.render(tbl_inner_stat_person_sum, bracket_close);
                //------- Sum End

                this.render(tbl_inner_stat_person, tbl_inner_stat_person_name);
                this.render(tbl_inner_stat_person, tbl_inner_stat_person_sum);

                var tbl_inner_stat_item_scale = this.addElm('div', 'tbl-inner-stat-item-scale');

                for (var j in statArr) {
                    var time_type = statArr[j]['time_type'];
                    var time_rel = statArr[j]['time_rel'];
                    var bg_timeline_item = this.addElm('div', 'bg-timeline-item');
                    bg_timeline_item.classList.add('bg-timeline-' + time_type);
                    bg_timeline_item.style.width = parseFloat(time_rel) + '%';
                    bg_timeline_item.style.backgroundColor = timelineTypes[time_type]['color'];
                    this.render(tbl_inner_stat_item_scale, bg_timeline_item);
                }

                this.render(tbl_inner_stat_item, tbl_inner_stat_person);
                this.render(tbl_inner_stat_item, tbl_inner_stat_item_scale);
                this.render(this.tbl_inner_stat, tbl_inner_stat_item);
            }
        }
    }, {
        key: 'ajaxUpdate',
        value: async function ajaxUpdate() {
            this.setControls();

            console.log('\n            this.selectedDate: ' + this.selectedDate + '\n            this.selectedDepart: ' + this.selectedDepart + '\n            this.selectedUser: ' + this.selectedUser + '\n            this.periodType: ' + this.periodType + '\n        ');

            var fields = {
                date: this.selectedDate,
                depart: this.selectedDepart,
                users: this.selectedUser,
                periodType: this.periodType
            };
            var options = {
                method: 'POST',
                headers: { 'Content-Type': 'application/json;charset=utf-8' },
                body: JSON.stringify(fields)
            };
            var response = fetch(this.ajaxUrl, options);
            var data = await response.json();

            this.loadTimline(data);
        }
    }, {
        key: 'handlers',
        value: function handlers() {
            var _this = this;

            this.datepicker_input.addEventListener('change', function (e) {
                var dateString = e.target.value;
                var timestamp = Date.parse(dateString);
                _this.selectedDate = new Date(timestamp);
                var dateFormated = _this.getDateFormated(_this.selectedDate, _this.dateFormat);

                if (!dateFormated.includes('NaN') && !dateFormated.includes('undefined')) {
                    _this.datepicker.querySelector('label').textContent = dateFormated;
                    _this.ajaxUpdate();
                }
            });

            this.dep_filter.addEventListener('click', function (e) {
                var list = e.currentTarget.querySelector('.tbl-control-filter-item-list');

                list.style.display = list.style.display == 'none' ? 'flex' : 'none';

                if (e.target.classList.contains('filter-select-item')) {
                    var filter_item_value = e.currentTarget.querySelector('.tbl-control-filter-item-value');
                    filter_item_value.textContent = e.target.textContent;
                    var id = e.target.dataset.id;
                    filter_item_value.dataset.id = id;
                    var all_users = _this.timelineProps['users'];
                    var users = [];

                    for (var user_id in all_users) {
                        var depart_id = all_users[user_id]['depart_id'];
                        if (depart_id == id) {
                            users.push(all_users[user_id]);
                        }
                    }
                    _this.ajaxUpdate();
                }
            });

            this.user_filter.addEventListener('click', function (e) {
                var list = e.currentTarget.querySelector('.tbl-control-filter-item-list');
                list.style.display = list.style.display == 'none' ? 'flex' : 'none';

                if (e.target.classList.contains('filter-select-item')) {
                    var filter_item_value = e.currentTarget.querySelector('.tbl-control-filter-item-value');
                    filter_item_value.dataset.id = e.target.dataset.id;
                    filter_item_value.textContent = e.target.textContent;
                    _this.ajaxUpdate();
                }
            });

            document.addEventListener('keydown', function (e) {
                if (e.code == 'Escape') {
                    if (!e.target.classList.contains('tbl-control-filter-item')) {
                        document.querySelectorAll('.tbl-control-filter-item-list').forEach(function (elm) {
                            elm.style.display = 'none';
                        });
                    }
                }
            });

            document.addEventListener('click', function (e) {
                if (!e.target.classList.contains('tbl-control-filter-item') && !e.target.classList.contains('tbl-control-filter-item-title') && !e.target.classList.contains('tbl-control-filter-item-value') && !e.target.classList.contains('tbl-control-filter-arrow') && !e.target.classList.contains('tbl-control-filter-item-list') && !e.target.classList.contains('filter-select-item')) {
                    if (!e.target.classList.contains('tbl-control-filter-item')) {
                        document.querySelectorAll('.tbl-control-filter-item-list').forEach(function (elm) {
                            elm.style.display = 'none';
                        });
                    }
                }
            });
        }
    }, {
        key: 'setControls',
        value: function setControls() {
            var depart = document.querySelector('.tbl-control-filter-dep .tbl-control-filter-item-value');
            var users = document.querySelector('.tbl-control-filter-user .tbl-control-filter-item-value');
            var datepicker = document.querySelector('.tbl-control-datepicker input.datepicker-input');
            this.selectedDepart = depart ? depart.dataset.id : 0;
            this.selectedUser = users ? users.dataset.id : 0;
            this.selectedDate = datepicker ? datepicker.value : 0;
        }
    }, {
        key: 'addElm',
        value: function addElm(elm) {
            var classes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
            var text = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
            var id = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';

            var _element$classList;

            var href = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : '';
            var title = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : '';

            var element = document.createElement(elm);
            if (classes) (_element$classList = element.classList).add.apply(_element$classList, _toConsumableArray(classes.split(' ')));
            if (text) element.textContent = text;
            if (id) element.id = id;
            if (href) element.href = href;
            if (title) element.title = title;
            return element;
        }
    }, {
        key: 'render',
        value: function render(parent, child) {
            parent.appendChild(child);
        }
    }, {
        key: 'isEmpty',
        value: function isEmpty(obj) {
            for (var prop in obj) {
                if (obj.hasOwnProperty(prop)) {
                    return false;
                }
            }

            return JSON.stringify(obj) === JSON.stringify({});
        }
    }, {
        key: 'getDateFormated',
        value: function getDateFormated(date) {
            var format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'd M Y';

            switch (format) {
                case 'd M Y':
                    return date.getDate() + ' ' + this.months[date.getMonth()] + ' ' + date.getFullYear();
                case 'Y-m-d':
                    var month = date.getMonth() + 1;
                    var day = date.getDate();
                    if (date.getMonth() < 10) month = '0' + month;
                    if (date.getDate() < 10) day = '0' + day;
                    return date.getFullYear() + '-' + month + '-' + day;
                case 'M Y':
                    return this.months[date.getMonth()] + ' ' + date.getFullYear();
                case 'd M Y - d M Y':
                    var dateStart = date;
                    var dateEnd = new Date(date.getFullYear(), date.getMonth(), date.getDate());
                    dateStart.setDate(dateStart.getDate() - dateStart.getDay() + 1);
                    dateEnd.setDate(dateEnd.getDate() + (7 - dateEnd.getDay()));
                    return dateStart.getDate() + ' ' + this.months[dateStart.getMonth()] + ' ' + dateStart.getFullYear() + ' - ' + dateEnd.getDate() + ' ' + this.months[dateEnd.getMonth()] + ' ' + dateEnd.getFullYear();
                default:
                    return date.getDate() + ' ' + this.months[date.getMonth()] + ' ' + date.getFullYear();
            }
        }
    }, {
        key: 'isParentContainChild',
        value: function isParentContainChild(parent, child) {
            return parent !== child && parent.contains(child);
        }
    }]);

    return TimelineDay;
}();

var TimelineMonth = function (_TimelineDay) {
    _inherits(TimelineMonth, _TimelineDay);

    function TimelineMonth() {
        var _ref;

        _classCallCheck(this, TimelineMonth);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        var _this2 = _possibleConstructorReturn(this, (_ref = TimelineMonth.__proto__ || Object.getPrototypeOf(TimelineMonth)).call.apply(_ref, [this].concat(args)));

        _this2.months = ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'];
        _this2.periodType = 'month';
        return _this2;
    }

    return TimelineMonth;
}(TimelineDay);

var TimelineWeek = function (_TimelineDay2) {
    _inherits(TimelineWeek, _TimelineDay2);

    function TimelineWeek() {
        var _ref2;

        _classCallCheck(this, TimelineWeek);

        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
            args[_key2] = arguments[_key2];
        }

        var _this3 = _possibleConstructorReturn(this, (_ref2 = TimelineWeek.__proto__ || Object.getPrototypeOf(TimelineWeek)).call.apply(_ref2, [this].concat(args)));

        _this3.timeList = ['Пон', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс'];
        _this3.periodType = 'week';
        return _this3;
    }

    _createClass(TimelineWeek, [{
        key: 'loadTimline',
        value: function loadTimline(data) {
            for (var user_id in data) {
                this.users[user_id] = data[user_id]['fullName'];
                this.departments[data[user_id]['department']['id']] = data[user_id]['department']['name'];
            }

            this.loadFilterDep(this.dep_filter_list);
            this.loadFilterCollabs(this.user_filter_list);

            var timelineSum = this.timelineProps['sum'];
            var timelineTypes = this.timelineProps['items'];

            // Clear timeline
            this.tbl_inner_stat.innerHTML = '';

            for (var i in data) {
                var fullName = data[i]['fullName'];
                var statArr = data[i]['statArr'];
                var statSum = data[i]['statSum'];

                var tbl_inner_stat_item = this.addElm('div', 'tbl-inner-stat-item');
                var tbl_inner_stat_person = this.addElm('div', 'tbl-inner-stat-person');
                var tbl_inner_stat_person_name = this.addElm('div', 'tbl-inner-stat-person-name', fullName);

                //     //------- Sum
                var tbl_inner_stat_person_sum = this.addElm('div', 'tbl-inner-stat-person-sum');
                var bracket_open = this.addElm('span', '', '(');
                var bracket_close = this.addElm('span', '', ')');
                this.render(tbl_inner_stat_person_sum, bracket_open);

                for (var type in timelineTypes) {
                    if (timelineSum.includes(type)) {
                        var timetype = this.addElm('span', 'timetype timetype-' + type, statSum['total'][type]);
                        timetype.style.color = timelineTypes[type]['color'];
                        this.render(tbl_inner_stat_person_sum, timetype);
                    }
                }

                this.render(tbl_inner_stat_person_sum, bracket_close);
                //     //------- Sum End

                this.render(tbl_inner_stat_person, tbl_inner_stat_person_name);
                this.render(tbl_inner_stat_person, tbl_inner_stat_person_sum);

                var tbl_inner_stat_item_scale = this.addElm('div', 'tbl-inner-stat-item-scale timeline-week');

                for (var day_id in statArr) {
                    var dayLine = statArr[day_id];
                    var timeline_week_item = this.addElm('div', 'timeline-week-item');
                    var timeline_week_item_scale = this.addElm('div', 'timeline-week-item-scale');

                    for (var key in dayLine) {
                        var bg_timeline_item_scale = this.addElm('div', 'bg-timeline-item-scale bg-timeline-' + dayLine[key]['time_type']);
                        bg_timeline_item_scale.style.width = parseFloat(dayLine[key]['time_rel']) + '%';
                        bg_timeline_item_scale.style.backgroundColor = timelineTypes[dayLine[key]['time_type']]['color'];
                        this.render(timeline_week_item_scale, bg_timeline_item_scale);
                    }

                    var timeline_week_item_sum = this.addElm('div', 'timeline-week-item-sum');
                    var timetype_presence = this.addElm('span', 'timetype-presence', statSum[day_id]['presence']);
                    var timetype_other = this.addElm('span', 'timetype-other', statSum[day_id]['other']);
                    var timetype_absence = this.addElm('span', 'timetype-absence', statSum[day_id]['absence']);

                    this.render(timeline_week_item_sum, timetype_presence);
                    this.render(timeline_week_item_sum, timetype_other);
                    this.render(timeline_week_item_sum, timetype_absence);

                    this.render(timeline_week_item, timeline_week_item_scale);
                    this.render(timeline_week_item, timeline_week_item_sum);

                    this.render(tbl_inner_stat_item_scale, timeline_week_item);
                }

                this.render(tbl_inner_stat_item, tbl_inner_stat_person);
                this.render(tbl_inner_stat_item, tbl_inner_stat_item_scale);
                this.render(this.tbl_inner_stat, tbl_inner_stat_item);
            }
        }
    }]);

    return TimelineWeek;
}(TimelineDay);

window.onload = function () {
    document.querySelectorAll('.tbl-control-period-item').forEach(function (elm) {
        elm.addEventListener('click', function (e) {
            var tab = e.currentTarget;
            var tabType = tab.dataset.period;
            var all_wraps = document.querySelectorAll('[data-wrap_period]');
            var wrapper = document.querySelector('[data-wrap_period=' + tabType + ']');

            all_wraps.forEach(function (elm) {
                elm.style.display = 'none';
            });
            wrapper.style.display = 'block';
        });
    });
};